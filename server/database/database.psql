CREATE DATABASE school_website;

DROP TABLE IF EXISTS table_user, table_class, table_interTable, table_employee, table_question, table_answer, table_test, table_grade, table_subject, table_subsubject;

CREATE TABLE IF NOT EXISTS table_user(
    user_id SERIAL PRIMARY KEY,
    class_id int,
    firstname VARCHAR(50) NOT NULL,
    lastname VARCHAR(50) NOT NULL,
    emailAddress VARCHAR(60) NOT NULL,
    password VARCHAR(150) NOT NULL,
    address VARCHAR(100),
    inscriptionDate TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    student boolean,
    phoneNumberTutor1 VARCHAR(20),
    phoneNumberTutor2 VARCHAR(20),
    emailTutor1 VARCHAR(60),
    emailTutor2 VARCHAR(60)
);

CREATE TABLE IF NOT EXISTS table_class(
    class_id SERIAL PRIMARY KEY,
    tutor_id int,
    name VARCHAR(50),
    year VARCHAR(50)
);

CREATE TABLE IF NOT EXISTS table_interTable(
    inter_id SERIAL PRIMARY KEY,
    class_id int,
    employee_id int
);

CREATE TABLE IF NOT EXISTS table_employee(
    employee_id SERIAL PRIMARY KEY,  
    firstname VARCHAR(50) NOT NULL,
    lastname VARCHAR(50) NOT NULL,
    birthdate VARCHAR(10),
    address VARCHAR(50),
    emailAddress VARCHAR(60) NOT NULL,
    phoneNumber VARCHAR(20),
    password VARCHAR(150) NOT NULL,
    inscriptionDate TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    functionEmployee VARCHAR(50) NOT NULL,
    isAdmin boolean
);

CREATE TABLE IF NOT EXISTS table_interro(
    interro_id SERIAL PRIMARY KEY,
    employee_id int NOT NULL,
    class_id int NOT NULL,
    subject_id int NOT NULL,
    sub_subject_id int NOT NULL,
    name VARCHAR(60) NOT NULL,
    total double precision NOT NULL
);

CREATE TABLE IF NOT EXISTS table_grade(
    grade_id SERIAL PRIMARY KEY,
    interro_id int NOT NULL,
    user_id int NOT NULL,
    grade double precision NOT NULL,
    total double precision NOT NULL,
    absent boolean NOT NULL
);

CREATE TABLE IF NOT EXISTS table_subject(
    subject_id SERIAL PRIMARY KEY,
    employee_id int NOT NULL,
    name VARCHAR(80) NOT NULL
);

CREATE TABLE IF NOT EXISTS table_subsubject(
    sub_subject_id SERIAL PRIMARY KEY,
    subject_id int NOT NULL,
    sub_subject_name VARCHAR(80) NOT NULL,
    percentage double precision NOT NULL
);

CREATE TABLE IF NOT EXISTS table_question(
    question_id SERIAL PRIMARY KEY,
    image VARCHAR(100),
    time int
);

CREATE TABLE IF NOT EXISTS table_answer(
    answer_id SERIAL PRIMARY KEY,
    question_id int NOT NULL,
    answer VARCHAR(100) NOT NULL,
    trueAnswerOrNot boolean
);
